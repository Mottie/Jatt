/*!
 * Jatt - just another tooltip v2.8.6 min
 * http://github.com/Mottie/Jatt
 * by Rob Garrison (aka Mottie)
 *
 * based on tooltip by Alen Grakalic (http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery)
 * tooltip modification by Rob G, aka Mottie (http://wowmotty.blogspot.com/)
 *
 */
;(function(a,v,t){a.jatt=function(h){var g,q,r=[],u=a("body"),i=a(t),o=a(v),b=a.extend({},a.jatt.defaultOptions,h);a.jatt.ttrelocate=function(f,e){var j=a("#"+e),d=j.outerWidth(),m=j.outerHeight(),c=j.data("options")||b,g={e:[c.xOffset,-m/2,d+c.xOffset,m/2],se:[c.xOffset,c.yOffset,d+c.xOffset,m+c.yOffset],s:[-d/2,c.yOffset,d/2,m+c.yOffset],sw:[-d-c.xOffset,c.yOffset,-c.xOffset,m+c.yOffset],w:[-d-c.xOffset,-m/2,-c.xOffset,m/2],nw:[-d-c.xOffset,-m-c.yOffset,-c.xOffset,-c.yOffset],n:[-d/2,-m-c.yOffset, d/2,-c.yOffset],ne:[c.xOffset,-m-c.yOffset,d+c.xOffset,-c.yOffset]}[c.direction],p=o.scrollTop(),k=o.scrollLeft(),n=a(f.target),i=f.pageX||n.position().left+n.width()/2,l=f.pageY||n.position().top+n.height()/2;c.followMouse||(i=n.outerWidth(),l=n.outerHeight(),l={e:[i,l/2],se:[i,l],s:[i/2,l],sw:[0,l],w:[0,l/2],nw:[0,0],n:[i/2,0],ne:[i,0]},i=n.offset().left+l[c.direction][0],l=n.offset().top+l[c.direction][1]);var n=i+g[0],h=l+g[1];i+g[2]>k+o.width()-c.xOffset&&(n=o.width()-d-c.xOffset);l+g[3]>p+o.height()- c.yOffset&&(h=l-m-c.yOffset);n<k+c.xOffset&&(n=k+c.xOffset);h<p+c.yOffset&&(h=l+c.yOffset);i>n&&(i<n+d&&l>h&&l<h+m)&&(h+=h-m/2-c.yOffset<p+c.yOffset?m/2+c.yOffset:-m/2-c.yOffset);j.css({left:n+"px",top:h+"px"})};a.jatt.getMeta=function(f){g=a.extend({},b);var e,j=[],d=f.attr(b.metadata)||"",d=d.match(/(\{.*\})/g)?d.match(/(\{.*\})/g)[0]:f.attr(b.metadata)||"",d=d.match("width|background|color|border|direction|followMouse|content|speed|local|xOffset|yOffset|zIndex")?d:f.attr("data-jatt")||"";""!== d&&(d=d.replace(/(\{|\'|\"|\})/g,""),d.match("direction|followMouse|content|speed|local|xOffset|yOffset|zIndex")&&(a.each(d.split(";"),function(b,c){e=c.split(":");if(e[0].match("direction|followMouse|content|speed|local|xOffset|yOffset|zIndex")){var d=a.trim(e[0]),f=a.trim(e[1]);g[d]="true"==f||"false"==f?"true"==f?!0:!1:isNaN(f)?f:parseFloat(f)}else j.push(c)}),d=j.join(";")));return[g,d]};a.jatt.removeTooltips=function(){var f=a("#"+b.previewId+", #"+b.tooltipId);f.length&&(f.remove(),i.trigger("hidden.jatt", a.data(i,"jatt")));for(;0<a("#"+b.previewId+", #"+b.tooltipId).length;)a("#"+b.previewId+", #"+b.tooltipId).remove()};a.jatt.preloadContent=function(f){if(0!==f.length){var e,j,d,g,c,i=[],h=a(b.tooltip),k=f.length;for(c=0;c<k;c++)e=t.createElement("img"),e.src=f[c],r.push(e);h.each(function(c){j=a(this);"A"===this.tagName&&j.is(b.preloadContent)&&(g=a(this).attr("href")||"",""!==g&&!g.match(/^#/)&&(d=a('<div rel="'+c+'" />'),i.push(d),d.load(g,function(){h.eq(d.attr(b.extradata)).data("tooltip",d.html())})))})}}; var h=b.live?"live":"bind",s=[];a.each(["initialized.jatt","beforeReveal.jatt","revealed.jatt","hidden.jatt"],function(f,e){var g=e.split(".")[0];a.isFunction(b[g])&&i.bind(e,b[g])});a.data(i,"jatt","");a(b.tooltip)[h](b.activate,function(f){var e,j,d,h,c,o,p,k=a(this);e="false"===b.metadata.toString()?[b,""]:a.jatt.getMeta(k);this!==a.data(i,"jatt")[0]&&a.jatt.removeTooltips();i.trigger("initialized.jatt",k);g=e[0];j=""===k.attr(g.content)?k.data("tooltip")||"":k.attr(g.content)||"";h=k.attr(b.extradata)|| "";c=k.attr("href")||"";k.data("tooltip",j);k.attr("title","");e='<div id="'+b.tooltipId+'" style="position:absolute;z-index:'+g.zIndex+";"+e[1]+'"><span class="body"></span><span class="close" style="display:none;">x</span></div>';g.local?k.before(e):u.append(e);d=a("#"+b.tooltipId);""===j&&(""!==h?j=a(h).html()||b.notFound:""!==c&&"#"!==c&&(j=b.loading,o=a("<div />"),o.load(c,function(){p=o.html();r=b.cacheData?p:"";d.hide().find(".body").html(p);k.data("tooltip",r);a.jatt.ttrelocate(f,b.tooltipId); d.fadeIn(g.speed)})));d.data("options",g).find(".body").html(j);a.jatt.ttrelocate(f,b.tooltipId);d.find(".close")[k.is(b.sticky)?"show":"hide"]().click(function(){a.jatt.removeTooltips()});a.data(i,"jatt",k);i.trigger("beforeReveal.jatt",k);d.fadeIn(g.speed);i.trigger("revealed.jatt",k)})[h](b.deactivate,function(){a(this).is(b.sticky)||a.jatt.removeTooltips()})[h]("mousemove",function(f){a("#"+b.tooltipId).length&&g.followMouse&&a.jatt.ttrelocate(f,b.tooltipId)});q=function(f,e,j){i.trigger("initialized.jatt", e);var d,h="false"==b.metadata.toString()?[b,""]:a.jatt.getMeta(e);g=h[0];d=""===e.attr(g.content)?e.data("tooltip")||"":e.attr(g.content)||"";e.data("tooltip",d);"title"===g.content&&e.attr(g.content,"");j='<div id="'+b.previewId+'" style="position:absolute;z-index:'+g.zIndex+";"+h[1]+'"><span class="body"><img src="'+j+(""!==d?"<br/>"+d:"")+'</span><span class="close" style="display:none;">x</span></div>';g.local?e.before(j):u.append(j);j=a("#"+b.previewId);a.data(i,"jatt",e);i.trigger("beforeReveal.jatt", e);j.hide().data("options",g).fadeIn(g.speed);j.find(".close")[e.is(b.sticky)?"show":"hide"]().click(function(){a.jatt.removeTooltips()});a.jatt.ttrelocate(f,b.previewId);i.trigger("revealed.jatt",e)};a(b.preview)[h](b.activate,function(f){var e=a(this);a.jatt.removeTooltips();q(f,e,e.attr("href")+'" alt="'+b.imagePreview+'" />')}).each(function(){s.push(a(this).attr("href"))});a(b.screenshot)[h](b.activate,function(f){var e=a(this),g=("#"===e.attr(b.extradata)?b.websitePreview+e.attr("href"):e.attr(b.extradata))+ '" alt="'+b.siteScreenshot+e.attr("href")+'" />';a.jatt.removeTooltips();q(f,e,g)}).each(function(){var f=a(this);s.push("#"===f.attr(b.extradata)?b.websitePreview+f.attr("href"):f.attr(b.extradata))});a(b.preview+","+b.screenshot)[h](b.deactivate,function(){a(this).is(b.sticky)||a.jatt.removeTooltips()})[h]("mousemove",function(f){a("#"+b.previewId).length&&g.followMouse&&a.jatt.ttrelocate(f,b.previewId)});a.jatt.preloadContent(s)};a.jatt.defaultOptions={direction:"n",followMouse:!0,content:"title", speed:300,local:!1,xOffset:20,yOffset:20,zIndex:1E3,live:!1,metadata:"class",extradata:"rel",activate:"mouseenter focusin",deactivate:"mouseleave focusout",cacheData:!0,websitePreview:"http://api1.thumbalizr.com/?width=250&url=",loading:"Loading...",notFound:"No tooltip found",imagePreview:"Image preview",siteScreenshot:"URL preview: ",tooltip:".tooltip",screenshot:"a.screenshot",preview:"a.preview",preloadContent:".preload",sticky:".sticky",tooltipId:"tooltip",previewId:"preview"}})(jQuery,this, document);
